---
const {sessionId} = Astro.props;
---

<script>
  import { deleteCart } from "../../stores/cart"

  class EmptyCartButton extends HTMLElement{
    constructor() {
      super()

      const sessionId = this.dataset.id
      const emptyCart = this.querySelector('#empty-cart')

      if (!sessionId || !emptyCart) return

      emptyCart.addEventListener("click", async () => {
        await deleteCart();
        this.remove()
      });
    }
  }

  customElements.define('empty-cart-button', EmptyCartButton)
</script>

<empty-cart-button data-id={sessionId}>
  <sl-button size="small" id="empty-cart">
    Empty cart
  </sl-button>
</empty-cart-button>